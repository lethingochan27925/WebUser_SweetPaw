<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Sweetpaw</title>
  <!-- Latest compiled and minified CSS -->
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css">

  <!-- jQuery library -->
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>

  <!-- Popper JS -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.16.0/umd/popper.min.js"></script>

  <!-- Latest compiled JavaScript -->
  <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>
  <!-- link font chữ -->
  <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Roboto:wght@300;400;500;700&display=swap">
  <!-- link icon -->
  <link rel="stylesheet" href="https://cdn-uicons.flaticon.com/uicons-regular-rounded/css/uicons-regular-rounded.css">
  <link rel='stylesheet' href='https://cdn-uicons.flaticon.com/uicons-regular-straight/css/uicons-regular-straight.css'>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/all.min.css">
  <!-- link css -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/normalize/8.0.1/normalize.min.css">
  <!-- <link rel="stylesheet" href="./assets/css/base.css"> -->
  <link rel="stylesheet" href="./assets/css/main.css">
  <link rel="stylesheet" href="./assets/css/reponsive1.css">

  <link rel="icon" href="./assets/img/logo/logo.svg" type="image/x-icon" />
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.6.0/jquery.min.js"
    integrity="sha512-894YE6QWD5I59HgZOGReFYm4dnWc1Qt5NtvYSaNcOP+u1T9qYdvdihz0PPSiiqn/+/3e7Jo4EaG7TubfWGUrMQ=="
    crossorigin="anonymous"></script>
  <link rel="stylesheet" href="./assets/css/login.css">
</head>
<style>
  form.example input[type=text] {
    padding: 10px;
    font-size: 17px;
    border: 1px solid grey;
    float: left;
    width: 80%;
    background: #f1f1f1;
  }

  form.example button {
    float: left;
    width: 20%;
    padding: 10px;
    background: #2196F3;
    color: white;
    font-size: 17px;
    border: 1px solid grey;
    border-left: none;
    cursor: pointer;
  }

  form.example button:hover {
    background: #0b7dda;
  }

  form.example::after {
    content: "";
    clear: both;
    display: table;
  }

</style>

<body>
  <div class="frame">
       <div class="overlay hidden"></div>

        <!-- login form -->
        <div class="container">
          <div class="login__form">
            <div class="row">
              <div class="">
                <form action="" method="POST" class="form" id="form-2">
                  <h3 class="heading">ĐĂNG NHẬP</h3>
                  
                  <div class="form-group">
                    <label for="email" class="form-label">Email</label>
                    <input id="email" name="email" type="text" placeholder="VD: email@domain.com" class="form-control">
                    <span class="form-message"></span>
                  </div>

                  <div class="form-group matkhau">
                    <label for="password" class="form-label">Mật khẩu</label>
                    <input id="password" name="password" type="password" placeholder="Nhập mật khẩu" class="form-control">
                    <!-- <span class="show-hide"><i class="fas fa-eye" onclick="myFunction()"></i></span> -->
                    <!-- <i class="fi-rs-eye-crossed undisplay" onclick="showhide()"></i> -->
                    <span class="form-message"></span> <br>
                    <a href="" class="form__forgot-password">Bạn quên mật khẩu? </a>
                  </div>
                  
                  <div class="btnDN">
                    <button class="form-submit btn-blocker" >ĐĂNG NHẬP </button> <br>
                  </div>

                  <div class="option">
                    <p style="font-size: 16px;margin: 10px 0;">Bạn chưa có tài khoản? 
                      <a href="./registration.html"
                      style="color: black; font-weight: bold;">Đăng ký</a></p>
                  </div>
                 
                </form>
              </div>
        
                
               
             
            </div>
          </div>
        </div>
        <!-- end login form -->
        <div class="sweetpaw">
          <img src="assets/img/logo/login2.png" alt="">
        </div>

  </div>
 
</body>
<script type="module" src="./services/auth.js"></script>
<script src="./assets/js/validator.js"></script>
<script src="./assets/js/main.js"></script>

<script>
  Validator({
    form: '#form-2',
    formGroupSelector: '.form-group',
    errorSelector: '.form-message',
    rules: [
      Validator.isRequired('#email'),
      Validator.isEmail('#email'),
      Validator.isRequired('#password'),
      Validator.minLength('#password', 6),
    ],
    onSubmit: async  function (data) {
      
      const email = data.email;
      const password = data.password;

      const res = await login(email, password);

      if (res.success === true) {
          window.location.href = "index.html";
      } else {
          alert(res.message || "Sai tài khoản hoặc mật khẩu");
      }
    }
  });
</script>
<script>
  const pass_field = document.querySelector('#password');
  const show_btn = document.querySelector('.fa-eye')
  function myFunction() {
    if (pass_field.type === "password") {
      pass_field.type = "text";
      show_btn.classList.add("hide");
    } else {
      pass_field.type = "password";
      show_btn.classList.remove("hide");
    }
  }
      
</script>

</html>